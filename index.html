
<!doctype html>
<html lang="pt-br">
     <head>
          <meta charset="utf-8">
          <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
          <meta name="description" content="">
          <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
          <meta name="generator" content="Jekyll v3.8.5">
          <title>Hash Game</title>

          <!-- Bootstrap core CSS -->
          <link href="bootstrap.min.css" rel="stylesheet">

          <style>
               .bd-placeholder-img {
                    font-size: 1.125rem;
                    text-anchor: middle;
                    -webkit-user-select: none;
                    -moz-user-select: none;
                    -ms-user-select: none;
                    user-select: none;
               }

               @media (min-width: 768px) {
                    .game input[name="opt"] {
                         width: 100px;
                         height:100px;
                    }
               }  
               @media (max-width: 768px) {
                    .game input[name="opt"] {
                         width: 33%;
                         height:100px;
                    }
               }      
               @media (max-width: 368px) {
                    .game input[name="opt"] {
                         width: 33%;
                         height:80px;
                    }
               }   
               @media (max-width: 168px) {
                    .game input[name="opt"] {
                         width: 33%;
                         height:10%;
                    }
               }     

          </style>
          <!-- Custom styles for this template -->
          <link href="style.css" rel="stylesheet">
     </head>
     <body class="text-center">
          <form class="game" name="game">
               <input class="btn btn-outline-secondary rounded-0 border-top-0 border-left-0" type="button" name="opt" value="" onclick="process(0)">
               <input class="btn btn-outline-secondary rounded-0 border-top-0" type="button" name="opt" value="" onclick="process(1)">
               <input class="btn btn-outline-secondary rounded-0 border-top-0 border-right-0" type="button" name="opt" value="" onclick="process(2)">
               <input class="btn btn-outline-secondary rounded-0 border-left-0" type="button" name="opt" value="" onclick="process(3)">
               <input class="btn btn-outline-secondary rounded-0" type="button" name="opt" value="" onclick="process(4)">
               <input class="btn btn-outline-secondary rounded-0 border-right-0" type="button" name="opt" value="" onclick="process(5)">
               <input class="btn btn-outline-secondary rounded-0 border-bottom-0 border-left-0" type="button" name="opt" value="" onclick="process(6)">
               <input class="btn btn-outline-secondary rounded-0 border-bottom-0" type="button" name="opt" value="" onclick="process(7)">
               <input class="btn btn-outline-secondary rounded-0 border-bottom-0 border-right-0" type="button" name="opt" value="" onclick="process(8)">
               <div>
                    <br>
                    <button class="btn btn-info rounded-0" type="button" id="restart" data-toggle="modal" data-target="#modalCenter">
                         COMEÇAR DE NOVO
                    </button>
               </div>
          </form>
          <div class="modal fade" id="modalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
               <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                         <div class="modal-header justify-content-center">
                              <h5 class="modal-title" id="exampleModalCenterTitle">Fim de Jogo</h5>
                         </div>
                         <div class="modal-body">
                              Jogo desenvolvido por uma arduosa equipe de desenvolvdores que precisam de sua ajuda.
                              <br>Doe-nos qualquer valor.
                              <br>Basta clicar no botão abaixo.
                         </div>
                         <div class="modal-footer justify-content-center">
                              <button type="button" class="btn btn-warning" onclick="reboot()" data-dismiss="modal">Recomeçar</button>
                              <button type="button" class="btn btn-danger" id="pay" onclick="otario()">Ajude-nos</button>  
                         </div>
                    </div>
               </div>
          </div>
          <script type="text/javascript">
               var clicks = 0;
               var matrix = [
                    [0, 1, 2],
                    [3, 4, 5],
                    [6, 7, 8],
                    [0, 3, 6],
                    [1, 4, 7],
                    [2, 5, 8],
                    [0, 4, 8],
                    [2, 4, 6]
               ];
               // a variável matrix serve como referencial de como deve ser as vitórias no jogo
               // tudo foi traduzido para combinações de vetores
               // assim ao completar linhas verticais, horizontais e diagornais, será declarado um vencedor.

               function process(pos) { //alterna o X e a O
                    clicks++;
                    var type = (clicks % 2 === 0) ? "X" : "O"; // define se é a vez do X ou da O
                    if(document.game.opt[pos].value == ""){ // testa para saber se na posição clicada, já foi selecionada antes
                         var type = document.game.opt[pos].value = type; // aplica a jogada
                         check(type); //faz uma leitura para saber se alguém venceu
                    }
                    else
                    {
                         clicks--; // se o campo clicado estava cheio, além de não clicar, regride/anula uma jogada 
                    }
                    if(clicks === 9){
                         $('#modalCenter').modal('show'); // caso dê empate, finaliza o jogo.
                    }
               }


               function check(type) { // verifica para saber se existe algum vencedor
                    matrix.forEach(function(x) {
                         var count = 0;
                         x.forEach(function(y) {
                              if (document.game.opt[y] && document.game.opt[y].value === type)
                                   count++;
                         });
                         if (count == 3) {
                              wins(x); // executa a função de vitória
                         }
                    });
               }

               function wins(x) { // função que executa a vitória
                    x.forEach(function(i) {
                         document.game.opt[i].classList.add('bg-success'); // deixa os campos do vencedor verde
                    });
                    $('#modalCenter').modal('show'); // mostra o modal de fim de jogo
               }

               function reboot() { // reinicia o jogo, limpando os dados
                    for (x = 0; x <= 8; x++) {
                         document.game.opt[x].value = '';
                         document.game.opt[x].classList.remove('bg-success');
                    }
                    document.game.X.value = '';
                    document.game.O.value = '';
               }

               function otario() {
                    var btn = document.getElementById('pay');
                    if (btn.innerHTML == 'Otário') 
                    {
                         btn.innerHTML = '$$$';
                         btn.disabled = false;
                    }
                    else {
                         btn.innerHTML = 'Otário'; 
                         btn.disabled = true;
                    }
               }
          </script>
          <script src="jquery.min.js"></script>
          <script src="bootstrap.bundle.min.js"></script>
     </body>
</html>
